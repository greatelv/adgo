# MVP PRD

# MVP Product Requirements Document (PRD)

| 문서 버전 | v1.1 | 작성일 | 202X.XX.XX |
| --- | --- | --- | --- |
| **작성자** | Senior PM | **상태** | **개발 대기 (Ready for Dev)** |
| **개발 스택** | Next.js 14, Supabase, Toss Payments | **타겟 디바이스** | Mobile Web First (Responsive) |

---

## 1. 제품 개요 및 목표 (Overview & Objectives)

### 1.1. 배경 및 목적

1인 크리에이터와 인디 메이커들은 좋은 제품을 만들고도 마케팅 리소스 부족으로 초기 유저 확보에 어려움을 겪습니다. '광고고'는 이들이 필요한 마케팅 액션(가입, 구독, 리뷰 등)을 **'퀘스트(의뢰)'** 형태로 등록하고, 서포터들이 이에 지원하면 빌더가 적합한 인원을 **'선별'**하여 미션을 수행하게 하는 **크라우드소싱 마케팅 플랫폼**입니다.

### 1.2. 핵심 가치 제안 (Value Proposition)

- **Builder (의뢰자):** 원하는 타겟/성향의 서포터를 직접 선별하여 진성 유저 확보 및 고품질의 결과물 획득.
- **Supporter (참여자):** 자신의 역량이나 관심사에 맞는 미션에 지원하고, 선정 시 미션을 수행하여 현금성 보상 획득.

### 1.3. MVP 성공 지표 (KPIs)

- **핵심 지표:** 주간 퀘스트 완료(지급) 10건
- **보조 지표:** 퀘스트 지원율(지원자 수/조회수), 총 충전 금액(TPV).

---

## 2. 유저 스토리 (User Stories)

| Actor | Story | Acceptance Criteria |
| --- | --- | --- |
| **Builder** | 나는 내 서비스의 마케팅을 위해 예치금을 충전하고 퀘스트를 의뢰하고 싶다. | PG 결제로 포인트 충전, 예산 범위 내 퀘스트 등록 시 포인트 차감(Escrow). |
| **Builder** | 나는 퀘스트에 지원한 서포터 목록을 보고, 내 서비스에 적합한 사람을 골라 작업을 맡기고 싶다. | 지원자 프로필/메시지 확인 후 [선정] 버튼 동작. 선정된 인원만 미션 수행 가능. |
| **Builder** | 나는 선정된 서포터가 수행한 결과를 확인하고 보상을 지급하고 싶다. | 결과물(URL/이미지) 확인 후 [지급 승인/반려] 처리. 승인 시 포인트 지급. |
| **Supporter** | 나는 관심 있는 퀘스트를 찾아보고, 나를 어필하여 지원하고 싶다. | 게시판에서 '모집 중' 퀘스트 확인, [지원하기] 클릭 및 한마디 작성. |
| **Supporter** | 나는 선정된 퀘스트를 수행하고 인증하여 보상을 받고 싶다. | '선정됨' 상태인 퀘스트에서 증빙 제출. 승인 시 포인트 획득. |
| **Supporter** | 나는 모은 포인트를 내 은행 계좌로 현금화하고 싶다. | 30,000 포인트 이상 시 출금 신청 가능. |

---

## 3. 핵심 기능 명세 (Functional Requirements)

### 3.1. 회원 및 인증 (Auth)

- **기능:** **네이버**, 구글 소셜 로그인 (Supabase Auth).
- **정책:**
    - 별도 가입 폼 없이 소셜 로그인으로 계정 생성.
    - `users` 테이블에 이메일, 닉네임, 프로필 이미지 저장.
    - 초기 닉네임은 랜덤/소셜 정보 사용, 마이페이지에서 수정 가능.

### 3.2. 지갑 및 포인트 시스템 (Wallet & Ledger)

- **화폐 단위:** 포인트 (1 Point = 1 KRW).
- **충전 (Charge):** Toss Payments Widget 연동 (최소 5,000원).
- **출금 (Withdraw):** 30,000 P 이상 신청 가능. 관리자 승인 후 오프라인 이체 및 상태 변경.
- **에스크로 (Escrow):**
    - 퀘스트 등록 시: `(건당 사례금 + 수수료 10%) * 모집 인원` 포인트 **즉시 차감**.
    - 차감된 포인트는 플랫폼 홀딩 계정으로 이동한 것으로 간주.
    - 퀘스트 취소/미선정 잔여분 발생 시 해당 금액만큼 환급.

### 3.3. 퀘스트 보드 (Quest Board)

- **UI 컨셉:** 깔끔한 의뢰 리스트 형태.
- **등록 (Create):**
    - 입력 필드: 제목, 썸네일, 카테고리, 상세 가이드, 인증 예시, 건당 사례금, 모집 인원.
    - **Validation:** `보유 포인트 >= (건당 사례금 * 1.1) * 인원`.
- **목록 (List):**
    - 필터: 최신순, 사례금순.
    - 상태 배지: 모집중, 심사중(인원 꽉 참), 마감.

### 3.4. 워크플로우 (Workflow) - **핵심 변경 사항**

이 서비스는 **[지원] -> [선정] -> [수행] -> [검수]** 4단계로 이루어집니다.

1. **지원 (Apply):**
    - 서포터가 [지원하기] 클릭.
    - 간단한 각오나 어필 멘트(Text) 입력 후 제출.
    - 상태: `APPLIED`.
2. **선정 (Select):**
    - 빌더가 지원자 목록 확인 (닉네임, 어필 멘트 등).
    - 빌더가 원하는 서포터를 [선정] 클릭.
    - 상태: `SELECTED`. (서포터에게 알림/UI 표시)
    - *모집 인원이 모두 선정되면 퀘스트 상태는 '진행중'으로 변경.*
3. **수행 (Submit):**
    - `SELECTED` 상태인 서포터만 결과물 제출 가능.
    - 증빙 자료 업로드.
    - 상태: `SUBMITTED`.
4. **검수 (Review):**
    - 빌더가 제출된 증빙 확인.
    - **승인 (Approve):** 사례금 지급. 상태 `APPROVED`.
    - **반려 (Reject):** 사유 입력. 재제출 기회를 줄지, 아예 탈락시킬지 결정(MVP에서는 탈락 처리 후 다시 모집 상태로 슬롯 복구 권장). 상태 `REJECTED`.

---

## 4. 데이터베이스 스키마 설계 (Supabase / PostgreSQL)

```sql
-- 1. Users Table
create table public.users (
  id uuid references auth.users not null primary key,
  email text not null,
  nickname text,
  avatar_url text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 2. Wallets Table
create table public.wallets (
  id uuid default gen_random_uuid() primary key,
  user_id uuid references public.users not null unique,
  balance integer default 0 not null check (balance >= 0),
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 3. Quests Table (의뢰글)
create table public.quests (
  id uuid default gen_random_uuid() primary key,
  builder_id uuid references public.users not null,
  title text not null,
  description text not null,
  category text not null,
  reward_per_person integer not null,
  recruit_count integer not null, -- 총 모집 인원
  status text default 'RECRUITING' check (status in ('RECRUITING', 'IN_PROGRESS', 'CLOSED', 'CANCELLED')),
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 4. Quest Applications (지원 및 수행 내역 통합)
-- 워크플로우 변경에 따라 상태값(status) 세분화
create table public.quest_applications (
  id uuid default gen_random_uuid() primary key,
  quest_id uuid references public.quests not null,
  supporter_id uuid references public.users not null,
  appeal_message text, -- 지원 시 작성하는 한마디
  proof_data text, -- 선정 후 제출하는 결과물 (URL/Image)
  status text default 'APPLIED' check (status in ('APPLIED', 'SELECTED', 'SUBMITTED', 'APPROVED', 'REJECTED')),
  reject_reason text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  unique(quest_id, supporter_id)
);

-- 5. Transaction Logs
create table public.transaction_logs (
  id uuid default gen_random_uuid() primary key,
  user_id uuid references public.users not null,
  amount integer not null,
  type text not null check (type in ('CHARGE', 'WITHDRAW', 'QUEST_CREATE', 'QUEST_REWARD', 'QUEST_REFUND')),
  related_quest_id uuid references public.quests,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

```

---

## 5. 페이지별 UI/UX 요구사항

### 5.1. 공통 레이아웃

- **Header:** 로고, GNB(퀘스트 찾기, 내 활동, 지갑), [의뢰하기] 버튼.

### 5.2. 퀘스트 상세 (Quest Detail)

- **정보 영역:** 미션 내용, 모집 인원(00명 모집 / 00명 지원중).
- **Action Bar (서포터):**
    - 미지원 시: [지원하기] 버튼 -> 모달(어필 메시지 입력).
    - 지원 완료 시: [지원 대기중] (비활성).
    - 선정 됨: [결과 제출하기] 버튼 활성화.
    - 제출 완료: [검수 대기중] (비활성).

### 5.3. 마이페이지 - 빌더 모드 (관리 기능 강화)

- **내 의뢰 목록:** 각 퀘스트별 [지원자 관리] 버튼 노출.
- **지원자 관리 페이지:**
    - **탭 1: 지원자 (Applicants):** 닉네임, 어필 메시지 표시. [선정], [거절] 버튼.
    - **탭 2: 수행 내역 (Submissions):** 선정된 인원이 제출한 결과물 확인. [승인(지급)], [반려] 버튼.

### 5.4. 마이페이지 - 서포터 모드

- **내 활동:**
    - 탭: `지원한 퀘스트` / `진행 중(선정됨)` / `완료`.
    - 각 리스트 아이템에 현재 상태(선정 대기, 수행 필요, 정산 완료 등) 배지 표시.

---

## 6. 예외 처리 및 정책 (Edge Cases & Policies)

### 6.1. 선별 및 마감 정책

- **모집 초과 지원:** 모집 인원보다 많은 사람이 지원할 수 있음 (지원 제한 없음).
- **자동 마감:** 빌더가 모집 인원만큼 '선정(SELECTED)'을 완료하면, 해당 퀘스트는 자동으로 모집 마감 상태가 됨 (신규 지원 불가).
- **선정 취소:** 빌더가 실수로 선정했거나, 서포터가 작업을 안 할 경우 '선정 취소' 가능. 취소 시 다시 모집 인원 슬롯이 비게 되어 추가 선발 가능.

### 6.2. 퀘스트 종료 및 환급

- **미선정 환급:** 퀘스트 모집 기간이 끝나거나 빌더가 퀘스트를 종료할 때, 모집 인원을 다 채우지 못했거나 선발하지 않은 잔여 슬롯(예산)은 빌더 지갑으로 **자동 환급** (`QUEST_REFUND`).

### 6.3. 먹튀 및 분쟁 방지

- **선정 후 미수행:** 선정된 서포터가 일정 기간(예: 3일) 내에 결과물을 제출하지 않으면 빌더가 선정을 취소할 수 있는 권한 부여.
- **악의적 반려:** 서포터가 정당한 수행을 했음에도 반려당한 경우, 신고하기 기능 제공.

---

## 7. 개발 참고 사항 (For Developers)

- **Supabase Auth:** Naver Provider 설정 필요 (네이버 개발자 센터 API Key 발급).
- **RLS Policy:**
    - `quest_applications`:
        - `INSERT`: 누구나 가능 (단, 본인 ID로만).
        - `UPDATE`: 빌더는 `status`를 `SELECTED`, `APPROVED`, `REJECTED`로 변경 가능. 서포터는 `SUBMITTED`로 변경 및 `proof_data` 업데이트 가능.
- **알림 (Notification):** MVP에서는 별도 알림 센터가 없다면, 서포터가 '내 활동' 페이지에 들어왔을 때 상태 변화를 시각적으로 잘 보여주는 것이 중요함 (Red Dot 등).